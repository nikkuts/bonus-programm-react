{"version":3,"file":"static/js/73.86f2af37.chunk.js","mappings":"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","sources":["webpack://bonus-programm-react/./src/components/HomeworkForm/HomeworkForm.module.css?1577","components/HomeworkForm/HomeworkForm.jsx","components/LessonFrams/Practice.jsx","redux/exercises/selectors.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"form\":\"HomeworkForm_form__pThrB\",\"groupTextarea\":\"HomeworkForm_groupTextarea__A++ew\",\"label\":\"HomeworkForm_label__iaE2u\",\"textarea\":\"HomeworkForm_textarea__PFgjr\",\"link\":\"HomeworkForm_link__xVLYe\",\"groupFile\":\"HomeworkForm_groupFile__RR4TV\",\"file\":\"HomeworkForm_file__KMZXS\",\"dangerBtn\":\"HomeworkForm_dangerBtn__f6Zsg\",\"wrapperBtn\":\"HomeworkForm_wrapperBtn__QdJjt\",\"shareBtn\":\"HomeworkForm_shareBtn__0w0rp\",\"primaryBtn\":\"HomeworkForm_primaryBtn__BaOkc\"};","import { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link, useLocation } from 'react-router-dom';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { addExercise, updateExercise, deleteFile } from 'redux/exercises/operations';\nimport { selectExercise } from 'redux/exercises/selectors';\nimport { BASE_CLIENT_URL } from '../../constants';\nimport css from './HomeworkForm.module.css';\n\nexport const HomeworkForm = ({courseId, lessonId}) => {\n  const dispatch = useDispatch(); \n  const location = useLocation();\n  const currentURL = location.pathname; \n\n  const {homework, fileURL} = useSelector(selectExercise);\n  const [textInput, setTextInput] = useState(homework);\n  const [fileInput, setFileInput] = useState(null);\n  const [isActiveTextarea, setIsActiveTextarea] = useState(false);\n\n  const handleTextChange = (e) => {\n    setTextInput(e.target.value);\n    setIsActiveTextarea(true);\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    setFileInput(file);\n  };\n\n  const isTextValid = (text) => {\n    if (text === '' || text.length > 3000) {\n      alert('Поле повинно бути заповненим і містити не більше 3000 символів.');\n      return false;\n    }\n    return true;\n  };\n\n  const isFileValid = (file) => {\n    if (file.size > 1048576) {\n      alert('Файл повинен бути не більше 1 Мб.');\n      return false;\n    }\n    return true;\n  };\n\n  const handleDeleteFile = () => {\n    if (fileURL === '') {\n      return;\n    };\n\n    const formData = {\n      courseId,\n      lessonId,\n      fileURL,\n    };\n\n    dispatch(\n      deleteFile(formData)\n    );\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    const formData = new FormData();\n    formData.append('courseId', courseId);\n    formData.append('lessonId', lessonId);\n\n    if (!isTextValid(textInput)) {\n      return;\n    }\n\n    formData.append('homework', textInput);\n\n    if (fileInput) {\n      \n        if (!isFileValid(fileInput)) {\n          return;\n        }\n\n        formData.append('file', fileInput);\n    }\n  \n    if (homework === '') {\n      dispatch(\n        addExercise(formData)\n      );\n    } else {\n      dispatch(\n        updateExercise(formData)\n      );\n    }\n    setIsActiveTextarea(false);\n  };\n\n  const shareHomework = () => {\n    if (homework === '' || isActiveTextarea) {\n      alert('Спочатку збережіть домашню роботу.');\n      return;\n    }\n\n    if (fileURL && fileURL !== '') {\n      window.open(`https://t.me/share/url?url=${fileURL}&text=${encodeURIComponent(homework)}`);\n    } else {\n      window.open(`https://t.me/share/url?url=${BASE_CLIENT_URL}${currentURL}&text=${encodeURIComponent(homework)}`);\n    }\n  };\n\n  useEffect(() => {\n    // Функція-обробник для обробки події beforeunload\n    const handleBeforeUnload = (e) => {\n      // Перевірка, чи активне текстове поле, і якщо так, попередження користувача\n      if (isActiveTextarea) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n\n    // Додавання обробника події beforeunload при монтуванні компонента\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    // Видалення обробника події beforeunload при розмонтуванні компонента\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [isActiveTextarea]);\n\n  return (\n    <>\n      <Form onSubmit={handleSubmit} className={css.form}>\n        <Form.Group \n          controlId=\"formText\"\n          className={css.groupTextarea} \n        >\n          <Form.Label className={css.label}>\n            Домашня робота\n          </Form.Label>\n          <Form.Control \n            as=\"textarea\" rows={10} \n            placeholder=\"Введіть текст\" \n            value={textInput} \n            onChange={handleTextChange}\n            className={css.textarea} \n          />\n        </Form.Group>\n        {fileURL && fileURL !== '' ?\n          <div className={css.groupFile}>\n            <Link\n              to={fileURL}\n              target='blank'\n              className={css.link}         \n            >\n              Прикріплений файл\n            </Link>\n            <Button \n              variant=\"danger\"\n              type='button' \n              onClick={handleDeleteFile}\n              className={css.dangerBtn}\n            >\n              Видалити файл\n            </Button>\n          </div>\n          :\n          <Form.Group \n            controlId=\"formFile\" \n            className={css.groupFile}\n          >\n            <Form.Control \n              type=\"file\" \n              onChange={handleFileChange}\n              className={css.file} \n            />               \n          </Form.Group>\n        }\n        <div className={css.wrapperBtn}>\n          <Button\n            onClick={shareHomework} \n            className={css.shareBtn}\n          >\n            Поділитися\n          </Button> \n          <Button \n            variant=\"primary\"\n            type=\"submit\"\n            className={css.primaryBtn}\n          >\n            Зберегти\n          </Button>\n        </div>        \n      </Form>\n    </>\n  ) \n};\n\n","import { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { selectCurrentLesson, selectExercise } from 'redux/exercises/selectors';\nimport { HomeworkForm } from 'components/HomeworkForm/HomeworkForm';\n\nexport default function Practice () {\n    const {courseId, lessonId} = useParams();\n\n    const currentLesson = useSelector(selectCurrentLesson);\n    const { homework } = useSelector(selectExercise);\n\n    const [nextHomework, setNextHomework] = useState(homework);\n\n    useEffect(() => {\n        setNextHomework(homework);      \n    }, [homework]);\n\n    return (\n        <>\n            {currentLesson.practice !== '' &&\n                <iframe \n                    title=\"Вставка Google doc\"\n                    src={currentLesson.practice} \n                    width=\"100%\" height=\"600\" frameBorder=\"0\" allow=\"autoplay\"\n                />\n            }\n            {homework === nextHomework &&\n                <HomeworkForm \n                    courseId={courseId}\n                    lessonId={lessonId}\n                />\n            }\n            <img src={currentLesson.diary} alt='Щоденник' width=\"100%\" />       \n        </>           \n    )\n  };","export const selectExercise = state => state.exercises.exercise;\n\nexport const selectIsLoading = state => state.exercises.isLoading;\n\nexport const selectError = state => state.exercises.error;\n\nexport const selectCurrentLesson = state => state.lesson.currentLesson;"],"names":["HomeworkForm","_ref","courseId","lessonId","dispatch","useDispatch","currentURL","useLocation","pathname","_useSelector","useSelector","selectExercise","homework","fileURL","_useState","useState","_useState2","_slicedToArray","textInput","setTextInput","_useState3","_useState4","fileInput","setFileInput","_useState5","_useState6","isActiveTextarea","setIsActiveTextarea","useEffect","handleBeforeUnload","e","preventDefault","returnValue","window","addEventListener","removeEventListener","_jsx","_Fragment","children","_jsxs","Form","onSubmit","formData","FormData","append","text","length","alert","size","addExercise","updateExercise","className","css","controlId","as","rows","placeholder","value","onChange","target","Link","to","Button","variant","type","onClick","deleteFile","file","files","open","concat","encodeURIComponent","BASE_CLIENT_URL","Practice","_useParams","useParams","currentLesson","selectCurrentLesson","nextHomework","setNextHomework","practice","title","src","width","height","frameBorder","allow","diary","alt","state","exercises","exercise","lesson"],"sourceRoot":""}